<!DOCTYPE html>
<html>
<head>    
    <meta charset="utf-8" />

    <style type="text/css">
		
		html, body {
			width:100%;
			height:100%;
			margin:0;
			padding:0;
			background:#fff;
			/*
    background-size: auto 100%;
    background-repeat: no-repeat;
	background-attachment: fixed;
	background-position: center bottom;
			*/

		}
		body {
			font-family:Arial, Helvetica, sans-serif;
		}
		.gray_photo {
			/*background-image: url("images/bg_gray_photo.jpg");*/
			background: rgba(0, 255, 0, 1) url("images/bg_gray_photo.jpg") no-repeat fixed center center / cover ;
		}
		.blue_photo {
			background: rgba(0, 255, 0, 1) url("images/bg_blue_photo.jpg") no-repeat fixed center center / cover ;
		}
		#arrow_Canvas {
			left:0;
			top: 0;
			border:0 none;
			display:block;
			position:fixed;
		}
		#imageme {
			position:fixed;
			width:100%;
			top:0;
		}
		#topme {
			visibility:hidden;
			position:absolute;
			top:0;
		}
		#bottomme {
			visibility:hidden;
			position:absolute;
			bottom:0;
		}
		#scrollme {
			background-color:#0FF;
			position:absolute;
			width:100%;
			top:0;
			visibility:hidden;
			/*
			opacity:0.4;
			*/
		}
		.scrollme_content {
		  background: #999;
		  border: 0 none;
		  cursor: pointer;
		  display: inline-block;
		  height: 50px;
		  margin: 0 49px;
		  position: relative;
		  top: 200px;
		  visibility: visible;
		  width: 100px;
		  text-align: center;
		  vertical-align: middle;
		  line-height: 50px;
		  color:#fff;
		}
	</style>  
    <script type="text/javascript">
	
//	on page load

var canvArrow, cp, pneuId;

var lines_x = [];
var lines_y = [];

function page_load() {

	//	define
	
	//btnStart = document.getElementById('start');
	
	canvArrow = document.getElementById("arrow_Canvas");
	
	imageMe = document.getElementById("imageme");
	
	topMe = document.getElementById("topme");
	
	bottomMe = document.getElementById("bottomme");
	
	chapterLinks = document.getElementsByClassName("scrollme_content");
	
	//	do
	
	for(var i = 0; i < chapterLinks.length; i++){

		chapterLinks[i].addEventListener('click', function(){
			 chapter.show(this);
		}, false);

	}
	
	resizeCanvas();

	

}

var chapter = {
	
	old_c: '',
	
	show: function(t){
		
		if(this.old_c != ''){imageMe.classList.remove(this.old_c);}
		
		var cl = t.innerHTML;
		
		imageMe.classList.add(cl);
		
		bottomMe.scrollIntoView({block: "start", behavior: "smooth"});
		
		this.old_c = cl;
	
	}
	
};

var dlg = {

	
	draw_all: function(w,h){
		
		dlg.wh_store = [w,h];

		var ctx = canvArrow.getContext("2d");
			
		ctx.clearRect(0, 0, canvArrow.width, canvArrow.height);

		this.draw_center_x(w,h,ctx);
				
	},
	
	draw_bullet: function(w,h,ctx){
		
		/*
		ctx.clearRect(0, 0, canvArrow.width, canvArrow.height);

		ctx.beginPath();
		ctx.arc(w, h, 12, 0, 2 * Math.PI, false);
		ctx.fillStyle = '#0f0';
		ctx.fill();
		ctx.closePath();

		this.draw_lines_x(w,h,ctx);
		*/
				
	},
		draw_center_x: function(w,h,ctx){
		
		ctx.globalCompositeOperation='source-over';
	
		ctx.beginPath();

		ctx.fillStyle = "#fff";

			for(var i = 0; i < 2; i++){
				
				var x_shift = (i == 0) ? w - 50 : w + 50;	//	ex lines
					
				var c = this.giveMeC(x_shift,w,canvArrow.width);
				
					if(i == 1){
					
						ctx.moveTo(x_shift - 100, 0);
						
						ctx.lineTo(x_shift, 0);
					
					}else{
					
						ctx.moveTo(x_shift, 0);
					
					}
						
						ctx.lineTo(x_shift, h - this.dw_param[2]);
				
					ctx.bezierCurveTo(
											x_shift, h - this.dw_param[1], 
											x_shift + c, h - this.dw_param[0], 
											x_shift + c, h
										);
				
					ctx.bezierCurveTo(
											x_shift + c, h + this.dw_param[0], 
											x_shift, h + this.dw_param[1], 
											x_shift, h + this.dw_param[2]
										);
				
					ctx.lineTo(x_shift, canvArrow.height);
					
					if(i == 0){
					
						ctx.lineTo(x_shift + 100, canvArrow.height);
					
					}
				
			}
			
		ctx.fill();

		ctx.closePath();
		
		ctx.globalCompositeOperation='xor';
		
		this.draw_center_y(w,h,ctx);
				
	},
	
	draw_center_y: function(w,h,ctx){
		
		ctx.beginPath();

		var hh = parseInt((h-1) / 50);

			for(var i = 0; i < 2; i++){
				
				var y_shift = lines_y[hh+i];	//	ex lines
					
			var c = this.giveMeC(y_shift,h,canvArrow.height);
				
				
					if(i == 1){
					
					ctx.moveTo(w - this.dw_param[2], y_shift - 50);
					
					ctx.lineTo(w - this.dw_param[2], y_shift);
					
					}else{
					
					ctx.moveTo(w - this.dw_param[2], y_shift);
					
					}
				
					ctx.bezierCurveTo(
											w - this.dw_param[1], y_shift, 
											w - this.dw_param[0], y_shift + c, 
											w, y_shift + c
										);
				
					ctx.bezierCurveTo(
											w + this.dw_param[0], y_shift + c, 
											w + this.dw_param[1], y_shift, 
											w + this.dw_param[2], y_shift
										);
					
					if(i == 0){
					
					ctx.lineTo(w + this.dw_param[2], y_shift + 50);
					
					}
				
			}
			
		ctx.fill();
		ctx.closePath();
		
		ctx.globalCompositeOperation='source-over';
		
		this.draw_lines_x(w,h,ctx);
				
	},
	
	draw_lines_x: function(w,h,ctx){

		for(var l = 0; l < 2; l++){
		
		ctx.beginPath();

		ctx.lineWidth = (l == 0) ? 50 : 1;
		ctx.strokeStyle = (l == 0) ? '#fff' : '#999';

			for(var i = 0; i < lines_x.length; i++){
				
				var x_shift = lines_x[i];
				
				var c = 0;
				if(x_shift < w + cp * 0.5 && x_shift > w - cp * 0.5){
					c = this.giveMeC(x_shift,w,canvArrow.width);
				}
			
				if(l == 0){
					if(x_shift < w){
						x_shift = lines_x[i] - 25;
					}else{
						x_shift = lines_x[i] + 25;
					}
				}
				
				ctx.moveTo(x_shift, 0);
				
					ctx.lineTo(x_shift, h - this.dw_param[2]);
				
					ctx.bezierCurveTo(
											x_shift, h - this.dw_param[1], 
											x_shift + c, h - this.dw_param[0], 
											x_shift + c, h
										);
				
					ctx.bezierCurveTo(
											x_shift + c, h + this.dw_param[0], 
											x_shift, h + this.dw_param[1], 
											x_shift, h + this.dw_param[2]
										);
			
				ctx.lineTo(x_shift, canvArrow.height);
				
			}
			
		ctx.stroke();
		ctx.closePath();
			
		}
		
		this.draw_lines_y(w,h,ctx);
				
	},
	
	draw_lines_y: function(w,h,ctx){
		
		ctx.beginPath();

		for(var i = 0; i < lines_y.length; i++){
			
			var y_shift = lines_y[i];
			
			var c = 0;
			
			if(y_shift < h + cp * 0.5 && y_shift > h - cp * 0.5){
				c = this.giveMeC(y_shift,h,canvArrow.height);
			}
			
			ctx.moveTo(0, y_shift);
			
				ctx.lineTo(w - this.dw_param[2], y_shift);
			
				ctx.bezierCurveTo(
										w - this.dw_param[1], y_shift, 
										w - this.dw_param[0], y_shift + c, 
										w, y_shift + c
									);
			
				ctx.bezierCurveTo(
										w + this.dw_param[0], y_shift + c, 
										w + this.dw_param[1], y_shift, 
										w + this.dw_param[2], y_shift
									);
		
			ctx.lineTo(canvArrow.width, y_shift);
			
		}
			
		ctx.stroke();
		ctx.closePath();
	},
	
	
	wh_store: [],
	
	dw_param: [300,300,600],
	
	spherize: 4,
	
	
	giveMeC: function(s,p,o){
			
		var diff = p - s;
		
		if(diff > 0){
			return (diff - cp * 0.5) / dlg.spherize;
		}
			
		return (diff + cp * 0.5) / dlg.spherize;
		
	},
	
	allow_pneu: false,
	
	eye_pneu: function(w,h,d){
		
		clearInterval(pneuId);
		
		var counter = 0;

		dlg.wh_store = [w,h];
		
		var steps = [1032,520,264,136,72,40,24,16,12,9,7,5];
		
		if(d != 0){steps.reverse();}
		
		pneuId = window.setInterval(function(){
			
			dlg.spherize = steps[counter];
									  
			dlg.draw_all(dlg.wh_store[0], dlg.wh_store[1]);
			
			counter++;
			
			if(counter > 11){
				clearInterval(pneuId);
				allow_pneu = false;
			}
			
		}, 20);
		
	},
	
	eye_scroll: function(p){
		
			if(p < 4){p = 4;}
		
			if(p > 300){p = 300;}
			
			dlg.spherize = p;
									  
			dlg.draw_all(dlg.wh_store[0], dlg.wh_store[1]);
	
	}
	
};

document.addEventListener('DOMContentLoaded', page_load, false);

window.addEventListener('mousemove', function(e){
	//dlg.allow_pneu = false;
	//clearInterval(pneuId);
	dlg.draw_all(e.clientX,e.clientY);
}, false);
											  /*

window.addEventListener('mouseup', function(e){
	dlg.allow_pneu = true;
	dlg.eye_pneu(e.clientX,e.clientY,1);
}, false);
											  */

window.addEventListener('scroll', function(e){
	/*
	console.log(window.pageYOffset);
	console.log(e.pageY);
	*/
	dlg.eye_scroll(300 - window.pageYOffset);
}, false);

        window.addEventListener('resize', resizeCanvas, false);
        
        function resizeCanvas() {
                canvArrow.width = window.innerWidth;
                canvArrow.height = window.innerHeight;
				
				for(var i = 0; i < canvArrow.width; i+=50){
					lines_x.push(i);
				}
				
				for(var i = 0; i < canvArrow.height; i+=50){
					lines_y.push(i);
				}
				
				cp = (canvArrow.width + canvArrow.height) / 2;
				
				dlg.spherize = cp;
				
				document.getElementById("scrollme").style.height = imageMe.style.height = window.innerHeight + 300 + 'px';
                
                /**
                 * Your drawings need to be inside this function otherwise they will be reset when 
                 * you resize the browser window and the canvas goes will be cleared.
                 */
                //drawStuff(); 
        }
		

    </script>

      
    
       
<head> 
   
<body>
<div id="imageme">
</div>
<canvas id="arrow_Canvas"></canvas>
<div id="scrollme">
	<div id="topme"></div>
	<span class="scrollme_content">gray_photo</span>
	<span class="scrollme_content">blue_photo</span>
	<div id="bottomme"></div>
</div>
</body>
</html>
